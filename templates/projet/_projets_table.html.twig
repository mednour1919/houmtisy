<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h3 class="mb-0">Détails des projets</h3>
        <a href="{{ path('app_projet_new') }}" class="btn btn-success">
            <i class="fas fa-plus"></i> Nouveau projet
        </a>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="table-light">
                    <tr>
                        <th>Nom</th>
                        <th>Statut</th>
                        <th class="text-end">Budget (€)</th>
                        <th class="text-end">Dépense (€)</th>
                        <th class="text-end">Solde (€)</th>
                        <th>Date Début</th>
                        <th>Date Fin</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                {% for projet in projets %}
                    <tr>
                        <td>{{ projet.nom }}</td>
                        <td>
                            <span class="badge 
                                {% if projet.statut == 'terminé' %}bg-success
                                {% elseif projet.statut == 'en cours' %}bg-primary
                                {% elseif projet.statut == 'suspendu' %}bg-warning
                                {% else %}bg-secondary{% endif %}">
                                {{ projet.statut }}
                            </span>
                        </td>
                        <td class="text-end">{{ projet.budget|number_format(2, ',', ' ') }}</td>
                        <td class="text-end">{{ projet.depense|number_format(2, ',', ' ') }}</td>
                        <td class="text-end fw-bold {{ projet.getSolde() < 0 ? 'text-danger' : 'text-success' }}">
                            {{ projet.getSolde()|number_format(2, ',', ' ') }}
                        </td>
                        <td>{{ projet.dateDebut ? projet.dateDebut|date('d/m/Y') : '' }}</td>
                        <td>{{ projet.dateFin ? projet.dateFin|date('d/m/Y') : '' }}</td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <a href="{{ path('app_projet_show', {'id': projet.id}) }}" class="btn btn-info">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <a href="{{ path('app_projet_edit', {'id': projet.id}) }}" class="btn btn-warning">
                                    <i class="fas fa-edit"></i>
                                </a>
                                {{ include('projet/_delete_form.html.twig') }}
                            </div>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="8" class="text-center">Aucun projet trouvé</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>